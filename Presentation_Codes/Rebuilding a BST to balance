#include<stdio.h>
#include<stdlib.h>
struct node{
    int data;
    struct node * left;
    struct node * right;
};
struct node * root=NULL;

struct node * insert(struct node * root,int val);
void inorder(struct node * root,int sarr[10],int * size);
struct node * rebuilt(int sarr[10],int low,int high);
struct node * nn(int val);
void preorder(struct node * root);

void main(){
    int arr[10];
    for(int i=0;i<10;i++){
        printf("data:");
        scanf("%d",&arr[i]);
        root=insert(root,arr[i]);
    }
    printf("The tree builded:\n");
    preorder(root);
    int sarr[10];
    int size=0;
    inorder(root,sarr,&size);
    
    root=NULL;
    root=rebuilt(sarr,0,9);
    
    
    printf("\nThe tree rebuilded:\n");
    preorder(root);
}

struct node * insert(struct node * root,int val){
    if(root==NULL){
        return nn(val);
    }
    else if(root->data>val){
        root->left=insert(root->left,val);
    }
    else if(root->data<val){
        root->right=insert(root->right,val);
    }
    return root;
}

struct node * nn(int val){
    struct node * nn=(struct node *)malloc(sizeof(struct node));
    nn->data=val;
    nn->left=NULL;
    nn->right=NULL;
    return nn;
}

void inorder(struct node *root,int sarr[10],int * size){
    if(root!=NULL){
        inorder(root->left,sarr,size);
        sarr[(*size)++]=root->data;
        inorder(root->right,sarr,size);
    }
}
struct node * rebuilt(int sarr[10],int low,int high){
    
    if(low>high){
        return NULL;
    }
    
    int mid=low+((high-low)/2);
    struct node * nroot = nn(sarr[mid]);
    
    nroot->left=rebuilt(sarr,low,mid-1);
    nroot->right=rebuilt(sarr,mid+1,high);
    
    return nroot;
}

void preorder(struct node * root){
    if(root==NULL) return ;
    printf("%d ",root->data);
    preorder(root->left);
    preorder(root->right);
}
